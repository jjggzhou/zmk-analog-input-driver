# Copyright (c) 2022 The ZMK Contributors
# SPDX-License-Identifier: MIT
description: |
  Input driver for ADC io channel

compatible: "zmk,analog-input"

properties:
  sampling-hz:
    type: int
    default: 100

child-binding:
  description: Per-channel configuration settings
  properties:
    io-channels:
      type: phandle-array
      required: true
    mv-mid:
      type: int
      required: true
      description: |
        Midpoint voltage in mV.
        Set to 32767 (0x7FFF) to enable auto-calibration.
    mv-min-max:
      type: int
      required: true
    mv-deadzone:
      type: int
      default: 10
    invert:
      type: boolean
    report-on-change-only:
      type: boolean
    scale-multiplier:
      type: int
      default: 1
    scale-divisor:
      type: int
      default: 70
    evt-type:
      type: int
      required: true
    input-code:
      type: int
      required: true

    calibration-samples:
      type: int
      required: false
      description: Number of samples for calibration
      default: 10
    calibration-retries:
      type: int
      required: false
      description: Maximum calibration retries
      default: 3
    calibration-variance-threshold:
      type: int
      required: false
      description: Maximum allowed variance in mV
      default: 100
    calibration-auto-save:
      type: boolean
      required: false
      description: Auto-save calibration to storage
      default: true
